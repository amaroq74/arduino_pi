<HTML><HEAD><TITLE>Manpage of XBEE_SETUP</TITLE>
</HEAD><BODY>
<H1>XBEE_SETUP</H1>
Section: Linux Programmer's Manual (3)<BR>Updated: 2010-06-24<BR><A HREF="#index">Index</A>
<A HREF="../index.html">Return to Main Contents</A><HR>

<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

xbee_setup, xbee_setuplog, xbee_setupAPI, xbee_setuplogAPI
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<B>#include &lt;<A HREF="file:/usr/include/xbee.h">xbee.h</A>&gt;</B>

<P>
<B>int xbee_setup(char *</B><I>path</I><B>, int </B><I>baudrate</I><B>);</B>

<P>
<B>int xbee_setuplog(char *</B><I>path</I><B>, int </B><I>baudrate</I><B>, int </B><I>logfd</I><B>);</B>

<P>
<B>int xbee_setupAPI(char *</B><I>path</I><B>, int </B><I>baudrate</I><B>, char </B><I>cmdSeq</I><B>, int </B><I>cmdTime</I><B>);</B>

<P>
<B>int xbee_setuplogAPI(char *</B><I>path</I><B>, int </B><I>baudrate</I><B>, int </B><I>logfd</I><B>, char </B><I>cmdSeq</I><B>, int </B><I>cmdTime</I><B>);</B>


<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

<P>
<B>A VERSION OF THIS FUNCTION MUST BE CALLED BEFORE ANY OTHER libxbee FUNCTION!</B>

The
<B>xbee_setup</B>()

function will setup libxbee so that it can handle an XBee.
It takes 2 arguments.
<P>
The argument
<I>path</I>

is the path to the serial port that the XBee is connected to (e.g. /dev/ttyUSB0).
<P>
The
<I>baudrate</I>

is the baud rate that the local XBee is configured to run at. The following are avaliable:

<PRE>
<B>1200</B>
<B>2400</B>
<B>4800</B>
<B>9600</B>
<B>19200</B>
<B>38400</B>
<B>57600</B>
<B>115200</B> - this is potentially unstable (read the XBee manual to find out why...)
</PRE>


<P>
Using
<B>xbee_setuplog</B>()

is exactly the same, but instead you give an open file descriptor. All log messages will be written to this file (you can use stderr or stdout if you want!). NOTE: The file descriptor is
<B>dup</B>()'ed

before use, so you may close it immediately. Providing a value of
<B>0</B>

will disable the log output.
<P>
Using
<B>xbee_setupAPI</B>()

is exactly the same, but instead you provide the 'Command Sequence' character and the 'Guard Time' that your local XBee has been configured with.
libxbee will then place your XBee in API mode 2, and when you call
<B>xbee_end</B>()

it will return your XBee to its previous API mode.
<P>
Using
<B>xbee_setuplogAPI</B>()

is simply a combination of
<B>xbee_setuplog</B>()

and
<B>xbee_setupAPI</B>()

<A NAME="lbAE">&nbsp;</A>
<H2>RETURN VALUE</H2>

If any error occures,
<B>-1</B>

is returned. Otherwise
<B>0</B>

is returned.
<A NAME="lbAF">&nbsp;</A>
<H2>EXAMPLE</H2>

To setup libxbee to use /dev/ttyUSB0 at 57600 baud:

<PRE>
#include &lt;<A HREF="file:/usr/include/xbee.h">xbee.h</A>&gt;
if (xbee_setup(&quot;/dev/ttyUSB0&quot;,57600) == -1) {
  printf(&quot;Oh no...);
  <A HREF="../man1/exit.1.html">exit</A>(1);
}
</PRE>


<A NAME="lbAG">&nbsp;</A>
<H2>NOTE</H2>

If libxbee is compiled with
<B>DEBUG</B>

defined, then the log output will ALWAYS be enabled. If no file descriptor is provided, then stderr will be used.
<A NAME="lbAH">&nbsp;</A>
<H2>AUTHOR</H2>

Attie Grande &lt;<A HREF="mailto:attie@attie.co.uk">attie@attie.co.uk</A>&gt; 
<A NAME="lbAI">&nbsp;</A>
<H2>SEE ALSO</H2>

<B><A HREF="../man3/libxbee.3.html">libxbee</A></B>(3),

<B><A HREF="../man3/xbee_newcon.3.html">xbee_newcon</A></B>(3),

<B><A HREF="../man3/xbee_getpacket.3.html">xbee_getpacket</A></B>(3),

<B><A HREF="../man3/xbee_senddata.3.html">xbee_senddata</A></B>(3),

<B><A HREF="../man3/xbee_end.3.html">xbee_end</A></B>(3)

<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">RETURN VALUE</A><DD>
<DT><A HREF="#lbAF">EXAMPLE</A><DD>
<DT><A HREF="#lbAG">NOTE</A><DD>
<DT><A HREF="#lbAH">AUTHOR</A><DD>
<DT><A HREF="#lbAI">SEE ALSO</A><DD>
</DL>
<HR>
This document was created by
<A HREF="http://localhost/cgi-bin/man/man2html">man2html</A>,
using the manual pages.<BR>
Time: 15:35:04 GMT, June 24, 2011
</BODY>
</HTML>
